[{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\analytics-actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[678,681],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[678,681],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3697,3700],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3697,3700],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3795,3798],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3795,3798],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\"\r\n\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { auth } from \"@/auth\"\r\nimport { subDays, format, eachDayOfInterval } from \"date-fns\"\r\n\r\nexport type AnalyticsPeriod = '7d' | '30d' | '90d' | 'all';\r\n\r\nexport async function getAnalytics(period: AnalyticsPeriod = '7d') {\r\n    const session = await auth();\r\n    // RBAC: Manager/TeamLead/Admin\r\n    if (!session?.user?.id) return { error: \"Unauthorized\" };\r\n\r\n    let startDate = subDays(new Date(), 7);\r\n    if (period === '30d') startDate = subDays(new Date(), 30);\r\n    if (period === '90d') startDate = subDays(new Date(), 90);\r\n    if (period === 'all') startDate = new Date(0); // Epoch\r\n    const whereClause: any = {\r\n        createdAt: { gte: startDate }\r\n    };\r\n\r\n    if (session.user.role !== 'MANAGER') {\r\n        whereClause.OR = [\r\n            { userId: session.user.id },\r\n            { assignedToId: session.user.id }\r\n        ];\r\n    }\r\n\r\n    // Scoping for Team Lead could be added here, but \"Sophisticated\" usually implies Global overview for now unless specified.\r\n    // I'll keep global for simplicity of \"High Level Report\".\r\n\r\n    const [\r\n        totalTickets,\r\n        openTickets,\r\n        resolvedTickets,\r\n        ticketsByStatus,\r\n        ticketsByPriority,\r\n        recentTickets\r\n    ] = await Promise.all([\r\n        prisma.case.count({ where: whereClause }),\r\n        prisma.case.count({ where: { ...whereClause, status: { in: ['OPEN', 'IN_PROGRESS', 'WAITING_CUSTOMER'] } } }),\r\n        prisma.case.count({ where: { ...whereClause, status: { in: ['RESOLVED', 'CLOSED'] } } }),\r\n        prisma.case.groupBy({\r\n            by: ['status'],\r\n            where: whereClause,\r\n            _count: { id: true }\r\n        }),\r\n        prisma.case.groupBy({\r\n            by: ['priority'],\r\n            where: whereClause,\r\n            _count: { id: true }\r\n        }),\r\n        prisma.case.findMany({\r\n            where: whereClause,\r\n            orderBy: { createdAt: 'desc' },\r\n            take: 5,\r\n            include: { user: { select: { name: true, email: true } } }\r\n        })\r\n    ]);\r\n\r\n    // Trend Data (Tickets per day)\r\n    // Prisma doesn't support easy \"group by day\" raw query without raw SQL or tedious processing.\r\n    // Efficient way: Fetch createdAts (lightweight) and aggregate in JS, or use raw query.\r\n    // For < 10k tickets, JS agg is fine.\r\n    const allTicketsDates = await prisma.case.findMany({\r\n        where: whereClause,\r\n        select: { createdAt: true, status: true }\r\n    });\r\n\r\n    const trendMap = new Map<string, { total: number, resolved: number }>();\r\n\r\n    // Initialize map with all days in range (to avoid gaps)\r\n    const days = eachDayOfInterval({ start: startDate, end: new Date() });\r\n    days.forEach(day => {\r\n        trendMap.set(format(day, 'yyyy-MM-dd'), { total: 0, resolved: 0 });\r\n    });\r\n\r\n    allTicketsDates.forEach((t: { createdAt: string | number | Date; status: string; }) => {\r\n        const key = format(t.createdAt, 'yyyy-MM-dd');\r\n        if (trendMap.has(key)) {\r\n            const entry = trendMap.get(key)!;\r\n            entry.total++;\r\n            if (['RESOLVED', 'CLOSED'].includes(t.status)) {\r\n                entry.resolved++;\r\n            }\r\n        }\r\n    });\r\n\r\n    const trendData = Array.from(trendMap.entries()).map(([date, data]) => ({\r\n        date,\r\n        tickets: data.total,\r\n        resolved: data.resolved\r\n    }));\r\n\r\n    return {\r\n        summary: {\r\n            total: totalTickets,\r\n            open: openTickets,\r\n            resolved: resolvedTickets,\r\n            resolutionRate: totalTickets > 0 ? Math.round((resolvedTickets / totalTickets) * 100) : 0\r\n        },\r\n        byStatus: ticketsByStatus.map((g: any) => ({ name: g.status, value: g._count.id })),\r\n        byPriority: ticketsByPriority.map((g: any) => ({ name: g.priority, value: g._count.id })),\r\n        trend: trendData,\r\n        recent: recentTickets\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\attachment-actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\auth-actions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is assigned a value but never used.","line":41,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":12}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[355,358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[355,358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\"\r\n\r\nimport { signIn, signOut } from \"@/auth\"\r\nimport { AuthError } from \"next-auth\"\r\nimport { getTranslations } from \"next-intl/server\"\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { hash } from \"bcryptjs\"\r\nimport { z } from \"zod\"\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport async function authenticate(values: any) {\r\n    const t = await getTranslations('Login');\r\n    try {\r\n        await signIn(\"credentials\", {\r\n            email: values.email,\r\n            password: values.password,\r\n            redirect: false,\r\n        })\r\n        return { success: true }\r\n    } catch (error) {\r\n        if (error instanceof AuthError) {\r\n            switch (error.type) {\r\n                case \"CredentialsSignin\":\r\n                    return { error: t('invalidCredentials') }\r\n                default:\r\n                    return { error: t('error') }\r\n            }\r\n        }\r\n        throw error\r\n    }\r\n}\r\n\r\n\r\nconst RegisterSchema = z.object({\r\n    name: z.string().min(1, \"El nombre es requerido\"),\r\n    email: z.string().email(\"Correo inválido\"),\r\n    password: z.string().min(6, \"Mínimo 6 caracteres\"),\r\n})\r\n\r\nexport async function register(values: z.infer<typeof RegisterSchema>) {\r\n    const t = await getTranslations('Register');\r\n    const validatedFields = RegisterSchema.safeParse(values);\r\n\r\n    if (!validatedFields.success) {\r\n        return { error: \"Campos inválidos\" };\r\n    }\r\n\r\n    const { email, password, name } = validatedFields.data;\r\n\r\n    if (!email.endsWith(\"@multicomputos.com\")) {\r\n        return { error: \"Solo se permiten correos de @multicomputos.com\" };\r\n    }\r\n\r\n    const existingUser = await prisma.user.findUnique({\r\n        where: { email },\r\n    });\r\n\r\n    if (existingUser) {\r\n        return { error: \"El correo ya está registrado\" };\r\n    }\r\n\r\n    const hashedPassword = await hash(password, 10);\r\n\r\n    await prisma.user.create({\r\n        data: {\r\n            name,\r\n            email,\r\n            password: hashedPassword,\r\n            role: 'TECHNICIAN', // Default role for internal signups\r\n        },\r\n    });\r\n\r\n    return { success: \"Usuario creado exitosamente!\" };\r\n}\r\n\r\nexport async function logout() {\r\n    await signOut({ redirectTo: \"/login\" });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\kb-actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\otp-actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\portal-ticket-actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\search-actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\settings-actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\ticket-actions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'session' is assigned a value but never used.","line":11,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'session' is assigned a value but never used.","line":58,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":18}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[931,934],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[931,934],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\"\r\n\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { auth } from \"@/auth\"\r\nimport { sendEmail } from \"@/lib/email-service\"\r\n\r\nimport { logActivity, AuditAction, AuditEntity } from \"@/lib/audit-service\"\r\n\r\nexport async function updateTicketStatus(ticketId: string, newStatus: string) {\r\n    const session = await auth();\r\n\r\n    try {\r\n        const ticket = await prisma.case.findUnique({\r\n            where: { id: ticketId },\r\n            include: { user: true }\r\n        });\r\n\r\n        if (!ticket) return { success: false, error: \"Ticket not found\" };\r\n\r\n        const oldStatus = ticket.status;\r\n\r\n        // Validate status enum manually or let Prisma throw\r\n        await prisma.case.update({\r\n            where: { id: ticketId },\r\n            data: {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                status: newStatus as any\r\n            }\r\n        })\r\n\r\n        await logActivity(\r\n            AuditAction.STATUS_CHANGE,\r\n            AuditEntity.TICKET,\r\n            ticketId,\r\n            { oldStatus, newStatus }\r\n        )\r\n\r\n        // Notify Customer\r\n        if (ticket.user && ticket.user.email) {\r\n            await sendEmail({\r\n                to: ticket.user.email,\r\n                subject: `Actualización de Ticket #${ticket.ticketNumber}`,\r\n                body: `El estado de su ticket \"${ticket.title}\" ha cambiado a: ${newStatus}.`\r\n            });\r\n        }\r\n\r\n        revalidatePath(`/admin/tickets/${ticketId}`)\r\n        revalidatePath(`/admin/tickets`)\r\n        return { success: true }\r\n    } catch (error) {\r\n        console.error(\"Failed to update ticket status\", error)\r\n        return { success: false, error: \"Failed to update status\" }\r\n    }\r\n}\r\n\r\nexport async function assignTicket(ticketId: string, assigneeId: string) {\r\n    const session = await auth();\r\n\r\n    try {\r\n        const assignee = await prisma.user.findUnique({ where: { id: assigneeId } });\r\n        if (!assignee) return { success: false, error: \"Usuario no encontrado\" };\r\n\r\n        const ticket = await prisma.case.update({\r\n            where: { id: ticketId },\r\n            data: { assignedToId: assigneeId }\r\n        })\r\n\r\n        await logActivity(\r\n            AuditAction.ASSIGN,\r\n            AuditEntity.TICKET,\r\n            ticketId,\r\n            { assignedTo: assignee.email }\r\n        )\r\n\r\n        // Notify Assignee\r\n        if (assignee.email) {\r\n            await sendEmail({\r\n                to: assignee.email,\r\n                subject: `Ticket Asignado #${ticket.ticketNumber}`,\r\n                body: `Se le ha asignado el ticket \"${ticket.title}\". Por favor revíselo en el panel.`\r\n            })\r\n        }\r\n\r\n        revalidatePath(`/admin/tickets/${ticketId}`)\r\n        revalidatePath(`/admin/tickets`)\r\n        return { success: true }\r\n    } catch (error) {\r\n        console.error(\"Failed to assign ticket\", error)\r\n        return { success: false, error: \"Failed to assign ticket\" }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\actions\\user-actions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getTranslations' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2618,2621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2618,2621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":111,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":111,"endColumn":19}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1842,1845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1842,1845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3657,3660],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3657,3660],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\"\r\n\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { hash } from \"bcryptjs\"\r\nimport { z } from \"zod\"\r\nimport { getTranslations } from \"next-intl/server\"\r\nimport { auth } from \"@/auth\"\r\n\r\nconst UserRole = {\r\n    MANAGER: 'MANAGER',\r\n    SERVICE_OFFICER: 'SERVICE_OFFICER',\r\n    TEAM_LEAD: 'TEAM_LEAD',\r\n    TECHNICAL_LEAD: 'TECHNICAL_LEAD',\r\n    TECHNICIAN: 'TECHNICIAN',\r\n    CONSULTANT: 'CONSULTANT',\r\n    DEVELOPER: 'DEVELOPER',\r\n    CLIENT: 'CLIENT'\r\n} as const;\r\n\r\nconst UserSchema = z.object({\r\n    id: z.string().optional(),\r\n    name: z.string().min(1, \"Nombre requerido\"),\r\n    email: z.string().email(\"Correo inválido\"),\r\n    role: z.nativeEnum(UserRole),\r\n    departmentId: z.string().nullable().optional(),\r\n    password: z.string().optional(), // Optional for updates\r\n})\r\n\r\nexport async function getUsers() {\r\n    return await prisma.user.findMany({\r\n        include: {\r\n            department: true\r\n        },\r\n        orderBy: {\r\n            name: 'asc'\r\n        }\r\n    })\r\n}\r\n\r\nexport async function getDepartments() {\r\n    return await prisma.department.findMany({\r\n        orderBy: { name: 'asc' }\r\n    })\r\n}\r\n\r\nexport async function upsertUser(values: z.infer<typeof UserSchema>) {\r\n    const session = await auth();\r\n    // Only MANAGER can manage users\r\n    if (session?.user?.role !== 'MANAGER') {\r\n        return { error: \"No tiene permisos para administrar usuarios.\" };\r\n    }\r\n\r\n    const validated = UserSchema.safeParse(values);\r\n    if (!validated.success) {\r\n        return { error: \"Datos inválidos\" }\r\n    }\r\n\r\n    const { id, name, email, role, departmentId, password } = validated.data;\r\n\r\n    try {\r\n        if (id) {\r\n            // Update\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const dataToUpdate: any = { name, email, role, departmentId };\r\n            if (password && password.length > 0) {\r\n                dataToUpdate.password = await hash(password, 10);\r\n            }\r\n\r\n            await prisma.user.update({\r\n                where: { id },\r\n                data: dataToUpdate\r\n            })\r\n        } else {\r\n            // Create\r\n            if (!password) return { error: \"Contraseña requerida para nuevos usuarios\" };\r\n\r\n            // Check existence\r\n            const existing = await prisma.user.findUnique({ where: { email } });\r\n            if (existing) return { error: \"El correo ya existe\" };\r\n\r\n            await prisma.user.create({\r\n                data: {\r\n                    name,\r\n                    email,\r\n                    role: role as any,\r\n                    departmentId,\r\n                    password: await hash(password, 10)\r\n                }\r\n            })\r\n        }\r\n\r\n        revalidatePath('/admin/users');\r\n        return { success: true };\r\n    } catch (error) {\r\n        console.error(error);\r\n        return { error: \"Error al guardar usuario\" };\r\n    }\r\n}\r\n\r\nexport async function deleteUser(id: string) {\r\n    const session = await auth();\r\n    if (session?.user?.role !== 'MANAGER') {\r\n        return { error: \"No autorizado\" };\r\n    }\r\n\r\n    try {\r\n        await prisma.user.delete({ where: { id } });\r\n        revalidatePath('/admin/users');\r\n        return { success: true };\r\n    } catch (error) {\r\n        return { error: \"Error al eliminar\" };\r\n    }\r\n}\r\n\r\nexport async function updateProfile(data: { name: string, password?: string }) {\r\n    const session = await auth();\r\n    if (!session?.user?.id) return { error: \"Unauthorized\" };\r\n\r\n    try {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const updateData: any = { name: data.name };\r\n        if (data.password && data.password.length > 0) {\r\n            updateData.password = await hash(data.password, 10);\r\n        }\r\n\r\n        await prisma.user.update({\r\n            where: { id: session.user.id },\r\n            data: updateData\r\n        });\r\n\r\n        revalidatePath('/admin/settings');\r\n        return { success: true };\r\n    } catch (e) {\r\n        console.error(e);\r\n        return { error: \"Error updating profile\" };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\audit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\kb\\[articleId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":3,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { prisma } from \"@/lib/prisma\"\r\nimport { ArticleForm } from \"@/components/admin/article-form\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Link } from '@/i18n/routing';\r\nimport { ChevronLeft } from \"lucide-react\"\r\nimport { getTranslations } from 'next-intl/server';\r\nimport { notFound } from \"next/navigation\";\r\n\r\ninterface PageProps {\r\n    params: Promise<{\r\n        articleId: string\r\n    }>\r\n}\r\n\r\nexport default async function EditArticlePage({ params }: PageProps) {\r\n    const { articleId } = await params\r\n    const t = await getTranslations('Admin.Article');\r\n\r\n    const article = await prisma.article.findUnique({\r\n        where: { id: articleId }\r\n    })\r\n\r\n    if (!article) {\r\n        notFound()\r\n    }\r\n\r\n    const categories = await prisma.category.findMany()\r\n\r\n    return (\r\n        <div className=\"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8\">\r\n            <div className=\"flex items-center gap-2\">\r\n                <Button asChild variant=\"outline\" size=\"icon\" className=\"h-7 w-7\">\r\n                    <Link href=\"/admin/kb\">\r\n                        <ChevronLeft className=\"h-4 w-4\" />\r\n                    </Link>\r\n                </Button>\r\n            </div>\r\n            <Card className=\"mx-auto w-full max-w-4xl\">\r\n                <CardHeader>\r\n                    <CardTitle>{t('update')}</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <ArticleForm categories={categories} article={article} />\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\kb\\new\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is assigned a value but never used.","line":11,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { prisma } from \"@/lib/prisma\"\r\nimport { ArticleForm } from \"@/components/admin/article-form\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Link } from '@/i18n/routing';\r\nimport { ChevronLeft, LayoutDashboard } from \"lucide-react\"\r\nimport { getTranslations } from 'next-intl/server';\r\n\r\nexport default async function NewArticlePage() {\r\n    const categories = await prisma.category.findMany()\r\n    const t = await getTranslations('Navigation');\r\n\r\n    return (\r\n        <div className=\"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8\">\r\n            <div className=\"flex items-center gap-2\">\r\n                <Button asChild variant=\"outline\" size=\"icon\" className=\"h-7 w-7\">\r\n                    <Link href=\"/admin/kb\">\r\n                        <ChevronLeft className=\"h-4 w-4\" />\r\n                    </Link>\r\n                </Button>\r\n                <Button asChild variant=\"outline\" size=\"icon\" className=\"h-7 w-7\">\r\n                    <Link href=\"/admin\">\r\n                        <LayoutDashboard className=\"h-4 w-4\" />\r\n                    </Link>\r\n                </Button>\r\n            </div>\r\n            <Card className=\"mx-auto w-full max-w-4xl\">\r\n                <CardHeader>\r\n                    <CardTitle>Create Article</CardTitle>\r\n                    <CardDescription>\r\n                        Add a new article to the knowledge base.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <ArticleForm categories={categories} />\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\kb\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2680,2683],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2680,2683],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1014,1017],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1014,1017],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\reports\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\settings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is assigned a value but never used.","line":10,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations } from \"next-intl/server\";\r\nimport { getSystemConfig } from \"@/actions/settings-actions\";\r\nimport { SettingsForm } from \"@/components/admin/settings-form\";\r\nimport { ProfileForm } from \"@/components/admin/profile-form\";\r\nimport { auth } from \"@/auth\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n\r\nexport default async function SettingsPage() {\r\n    const t = await getTranslations(\"Admin.Settings\");\r\n    const tAdmin = await getTranslations(\"Admin\");\r\n    const session = await auth();\r\n    const config = await getSystemConfig();\r\n\r\n    if (!session?.user) return null;\r\n\r\n    const initialData = {\r\n        companyName: config.companyName,\r\n        supportEmail: config.supportEmail,\r\n        maintenanceMode: config.maintenanceMode,\r\n        maxUploadSizeMB: config.maxUploadSizeMB,\r\n        allowedFileTypes: config.allowedFileTypes,\r\n    };\r\n\r\n    const isManager = session.user.role === \"MANAGER\";\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <h2 className=\"text-3xl font-bold tracking-tight\">{tAdmin(\"settingsTitle\")}</h2>\r\n\r\n            <Tabs defaultValue=\"profile\" className=\"space-y-4\">\r\n                <TabsList>\r\n                    <TabsTrigger value=\"profile\">{tAdmin(\"profileInfo\")}</TabsTrigger>\r\n                    {isManager && <TabsTrigger value=\"system\">{tAdmin(\"systemConfig\")}</TabsTrigger>}\r\n                </TabsList>\r\n\r\n                <TabsContent value=\"profile\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>{tAdmin(\"profileInfo\")}</CardTitle>\r\n                            <CardDescription>\r\n                                {tAdmin(\"profileDesc\")}\r\n                            </CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <ProfileForm user={session.user} />\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                {isManager && (\r\n                    <TabsContent value=\"system\">\r\n                        <SettingsForm initialData={initialData} />\r\n                    </TabsContent>\r\n                )}\r\n            </Tabs>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\tickets\\[ticketId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Flag' is defined but never used.","line":10,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":46}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2391,2394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2391,2394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations } from 'next-intl/server';\nimport { prisma } from \"@/lib/prisma\"\nimport { auth } from \"@/auth\"\nimport { Link } from '@/i18n/routing';\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { format } from \"date-fns\"\nimport { es, enUS } from \"date-fns/locale\"\nimport { ChevronLeft, User, AlertCircle, Flag, Users, History, LayoutDashboard } from \"lucide-react\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { TicketStatusUpdater } from \"@/components/admin/ticket-status-updater\"\nimport { TicketAssigner } from \"@/components/admin/ticket-assigner\"\nimport { AuditLogTimeline } from \"@/components/admin/audit-log-timeline\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { StatusBadge } from \"@/components/status-badge\"\nimport { PriorityBadge } from \"@/components/priority-badge\"\nimport { AttachmentSection } from \"@/components/attachments/attachment-section\"\n\n\ninterface Props {\n  params: Promise<{\n    ticketId: string;\n    locale: string;\n  }>\n}\n\nexport default async function TicketDetailPage({ params }: Props) {\n  const resolvedParams = await params;\n  const { ticketId } = resolvedParams;\n  const t = await getTranslations('Admin.TicketDetail');\n\n  const ticket = await prisma.case.findUnique({\n    where: { id: ticketId },\n    include: {\n      user: true,\n      assignedTo: true\n    }\n  })\n\n  const session = await auth();\n\n\n\n  // Access Control\n  if (session?.user?.role !== 'MANAGER') {\n    const isOwner = ticket.userId === session?.user?.id;\n    const isAssigned = ticket.assignedToId === session?.user?.id;\n\n    if (!isOwner && !isAssigned) {\n      return (\n        <div className=\"flex h-[50vh] flex-col items-center justify-center gap-2\">\n          <AlertCircle className=\"h-8 w-8 text-destructive\" />\n          <h2 className=\"text-xl font-semibold\">Acceso Denegado</h2>\n          <p className=\"text-muted-foreground\">No tienes permisos para ver este ticket.</p>\n          <Button asChild variant=\"outline\" className=\"mt-4\">\n            <Link href=\"/admin/tickets\">{t('back')}</Link>\n          </Button>\n        </div>\n      )\n    }\n  }\n\n  // RBAC Assignment Filtering\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let departmentFilter: any = {};\n\n  if (session?.user?.id) {\n    const currentUser = await prisma.user.findUnique({\n      where: { id: session.user.id },\n      select: { role: true, departmentId: true }\n    });\n\n    if (currentUser && currentUser.role !== 'MANAGER' && currentUser.role !== 'SERVICE_OFFICER') {\n      if (currentUser.departmentId) {\n        if (currentUser.role === 'TEAM_LEAD') {\n          departmentFilter = {\n            departmentId: currentUser.departmentId,\n            role: { in: ['TEAM_LEAD', 'TECHNICAL_LEAD', 'TECHNICIAN'] }\n          }\n        } else if (currentUser.role === 'TECHNICAL_LEAD') {\n          // Technical Lead only assigns to Technicians in their dept\n          departmentFilter = {\n            departmentId: currentUser.departmentId,\n            role: { in: ['TECHNICAL_LEAD', 'TECHNICIAN'] }\n          };\n        } else {\n          departmentFilter = { departmentId: currentUser.departmentId };\n        }\n      } else {\n        // User has no department but is not manager - prevent viewing other agents\n        departmentFilter = { id: 'none' };\n      }\n    }\n  }\n\n  // Fetch agents/admins for assignment\n  const agents = await prisma.user.findMany({\n    where: {\n      role: { in: ['MANAGER', 'SERVICE_OFFICER', 'TEAM_LEAD', 'TECHNICAL_LEAD', 'TECHNICIAN', 'CONSULTANT', 'DEVELOPER'] },\n      ...departmentFilter\n    },\n    select: { id: true, name: true, email: true }\n  })\n\n  // Fetch Audit Logs\n  const auditLogs = await prisma.auditLog.findMany({\n    where: {\n      entity: 'TICKET',\n      entityId: ticketId\n    },\n    include: {\n      actor: { select: { name: true, email: true } }\n    },\n    orderBy: { createdAt: 'desc' }\n  })\n\n  if (!ticket) {\n    return <div>Ticket not found</div>\n  }\n\n  return (\n    <div className=\"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8\">\n      <div className=\"flex items-center gap-4\">\n        <div className=\"flex items-center gap-2\">\n          <Button asChild variant=\"outline\" size=\"icon\" className=\"h-7 w-7\">\n            <Link href=\"/admin/tickets\">\n              <ChevronLeft className=\"h-4 w-4\" />\n              <span className=\"sr-only\">{t('back')}</span>\n            </Link>\n          </Button>\n          <Button asChild variant=\"outline\" size=\"icon\" className=\"h-7 w-7\">\n            <Link href=\"/admin\">\n              <LayoutDashboard className=\"h-4 w-4\" />\n              <span className=\"sr-only\">{t('dashboard')}</span>\n            </Link>\n          </Button>\n        </div>\n        <h1 className=\"flex-1 shrink-0 whitespace-nowrap text-xl font-semibold tracking-tight sm:grow-0\">\n          {t('title')} {ticket.ticketNumber}\n        </h1>\n        <div className=\"hidden items-center gap-2 md:ml-auto md:flex\">\n          <StatusBadge status={ticket.status} />\n        </div>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-[1fr_250px] lg:grid-cols-3 lg:gap-8\">\n        <div className=\"grid auto-rows-max items-start gap-4 lg:col-span-2 lg:gap-8\">\n          <Tabs defaultValue=\"details\">\n            <TabsList>\n              <TabsTrigger value=\"details\">{t('details')}</TabsTrigger>\n              <TabsTrigger value=\"history\">{t('history')}</TabsTrigger>\n            </TabsList>\n            <TabsContent value=\"details\">\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle>{ticket.title}</CardTitle>\n                  <CardDescription className=\"max-w-lg text-balance leading-relaxed\">\n                    {t('createdAt')} {format(ticket.createdAt, \"PPP p\", { locale: resolvedParams.locale === 'es' ? es : enUS })}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid gap-6\">\n                    <div className=\"grid gap-3\">\n                      <h3 className=\"font-semibold\">{t('description')}</h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {ticket.description}\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n            <TabsContent value=\"history\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <History className=\"h-4 w-4\" />\n                    {t('auditLog')}\n                  </CardTitle>\n                  <CardDescription>{t('auditLogDesc')}</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <AuditLogTimeline logs={auditLogs} emptyText={t('noActivity')} />\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n        <div className=\"grid auto-rows-max items-start gap-4 lg:gap-8\">\n          <Card>\n            <CardHeader>\n              <CardTitle>{t('details')}</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid gap-6\">\n                <div className=\"grid gap-3\">\n                  <span className=\"text-muted-foreground text-xs font-medium\">{t('customer')}</span>\n                  <div className=\"flex items-center gap-2\">\n                    <User className=\"h-4 w-4 text-primary\" />\n                    <span className=\"text-sm font-medium\">{ticket.user.name || ticket.user.email}</span>\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">{ticket.user.email}</div>\n                </div>\n                <Separator />\n                <div className=\"grid gap-3\">\n                  <span className=\"text-muted-foreground text-xs font-medium\">{t('assignee')}</span>\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Users className=\"h-4 w-4 text-primary\" />\n                    <span className=\"text-sm font-medium\">\n                      {ticket.assignedTo ? (ticket.assignedTo.name || ticket.assignedTo.email) : t('unassigned')}\n                    </span>\n                  </div>\n                  <TicketAssigner\n                    ticketId={ticket.id}\n                    currentAssigneeId={ticket.assignedToId}\n                    users={agents}\n                  />\n                </div>\n                <Separator />\n                <div className=\"grid gap-3\">\n                  <span className=\"text-muted-foreground text-xs font-medium\">{t('priority')}</span>\n                  <div className=\"flex items-center gap-2\">\n                    <PriorityBadge priority={ticket.priority} />\n                  </div>\n                </div>\n                <Separator />\n                <div className=\"grid gap-3\">\n                  <span className=\"text-muted-foreground text-xs font-medium\">{t('status')}</span>\n                  <TicketStatusUpdater ticketId={ticket.id} currentStatus={ticket.status} />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n          <AttachmentSection ticketId={ticket.id} />\n        </div>\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\tickets\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":15}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1019,1022],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1019,1022],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3650,3653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3650,3653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { format } from \"date-fns\"\r\nimport { getTranslations } from 'next-intl/server';\r\nimport { StatusBadge } from \"@/components/status-badge\"\r\nimport { PriorityBadge } from \"@/components/priority-badge\"\r\nimport { auth } from \"@/auth\";\r\nimport { TicketFilters } from \"@/components/admin/ticket-filters\"\r\n\r\nexport default async function TicketsPage({\r\n    searchParams,\r\n}: {\r\n    searchParams?: Promise<{\r\n        query?: string;\r\n    }>;\r\n}) {\r\n    const t = await getTranslations('Admin');\r\n    const session = await auth();\r\n    const params = await searchParams;\r\n    const query = params?.query || '';\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    let whereClause: any = {};\r\n\r\n    if (query) {\r\n        whereClause.OR = [\r\n            { title: { contains: query, mode: 'insensitive' } },\r\n            { ticketNumber: { contains: query, mode: 'insensitive' } },\r\n            { user: { name: { contains: query, mode: 'insensitive' } } }\r\n        ];\r\n    }\r\n\r\n    // Role restriction\r\n    if (session?.user?.role !== 'MANAGER') {\r\n        const userFilter = {\r\n            OR: [\r\n                { userId: session?.user?.id },\r\n                { assignedToId: session?.user?.id }\r\n            ]\r\n        };\r\n\r\n        if (whereClause.OR) {\r\n            whereClause = {\r\n                AND: [\r\n                    whereClause,\r\n                    userFilter\r\n                ]\r\n            };\r\n        } else {\r\n            whereClause = userFilter;\r\n        }\r\n    }\r\n\r\n    const tickets = await prisma.case.findMany({\r\n        where: whereClause,\r\n        include: {\r\n            user: true,\r\n            assignedTo: true\r\n        },\r\n        orderBy: {\r\n            createdAt: 'desc'\r\n        }\r\n    });\r\n\r\n    return (\r\n        <Card x-chunk=\"dashboard-05-chunk-3\">\r\n            <CardHeader className=\"px-7\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <CardTitle>{t('tickets')}</CardTitle>\r\n                        <CardDescription>\r\n                            {t('ticketsDescription')}\r\n                        </CardDescription>\r\n                    </div>\r\n                    <TicketFilters />\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow>\r\n                                <TableHead>{t('ticketNo')}</TableHead>\r\n                                <TableHead>{t('ticketTitle')}</TableHead>\r\n                                <TableHead>{t('customer')}</TableHead>\r\n                                <TableHead>{t('TicketDetail.assignee')}</TableHead>\r\n                                <TableHead className=\"hidden sm:table-cell\">{t('priority')}</TableHead>\r\n                                <TableHead className=\"hidden sm:table-cell\">{t('status')}</TableHead>\r\n                                <TableHead className=\"hidden md:table-cell\">{t('date')}</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\r\n                            {tickets.map((ticket: any) => (\r\n                                <TableRow key={ticket.id}>\r\n                                    <TableCell>\r\n                                        <div className=\"font-medium\">\r\n                                            <a href={`/admin/tickets/${ticket.id}`} className=\"hover:underline\">\r\n                                                #{ticket.ticketNumber || String(ticket.id).substring(0, 8).toUpperCase()}\r\n                                            </a>\r\n                                        </div>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <div className=\"font-medium\">\r\n                                            <a href={`/admin/tickets/${ticket.id}`} className=\"hover:underline\">\r\n                                                {ticket.title}\r\n                                            </a>\r\n                                        </div>\r\n                                        <div className=\"text-xs text-muted-foreground md:hidden\">\r\n                                            {ticket.status}\r\n                                        </div>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <div className=\"font-medium\">{ticket.user.name || 'Unknown'}</div>\r\n                                        <div className=\"hidden text-sm text-muted-foreground md:inline\">\r\n                                            {ticket.user.email}\r\n                                        </div>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <div className=\"text-sm\">\r\n                                            {ticket.assignedTo?.name || <span className=\"text-muted-foreground italic\">{t('TicketDetail.unassigned')}</span>}\r\n                                        </div>\r\n                                    </TableCell>\r\n                                    <TableCell className=\"hidden sm:table-cell\">\r\n                                        <PriorityBadge priority={ticket.priority} />\r\n                                    </TableCell>\r\n                                    <TableCell className=\"hidden sm:table-cell\">\r\n                                        <StatusBadge status={ticket.status} />\r\n                                    </TableCell>\r\n                                    <TableCell className=\"hidden md:table-cell\">\r\n                                        {format(ticket.createdAt, 'yyyy-MM-dd HH:mm')}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                            {tickets.length === 0 && (\r\n                                <TableRow>\r\n                                    <TableCell colSpan={7} className=\"text-center h-24\">\r\n                                        {t('noTickets')}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\admin\\users\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteUser' is defined but never used.","line":2,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":14,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations } from 'next-intl/server';\r\nimport { getUsers, getDepartments, deleteUser } from \"@/actions/user-actions\"\r\nimport { UserDialog } from \"@/components/admin/user-dialog\"\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\"\r\nimport { Edit, Trash2 } from \"lucide-react\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\n\r\nimport { auth } from \"@/auth\"\r\nimport { redirect } from \"next/navigation\"\r\n\r\nexport default async function UsersPage() {\r\n    const session = await auth();\r\n    if (session?.user?.role !== 'MANAGER') {\r\n        redirect('/es/admin'); // Or just /admin if locale handled. But explicit locale often safer or use localized redirect if available.\r\n        // Actually, redirect from next/navigation handles relative paths? I'll use redirect('/admin') but middleware might strip locale? \r\n        // Best to use localized redirect if available in i18n/routing? \r\n        // Let's use standard redirect('/admin') likely handled by middleware or localized.\r\n        // Wait, app/[locale]... implies I am inside locale. \r\n        // I should probably redirect to `/admin` and let middleware handle it or use the `redirect` from `navigation`.\r\n        // Better: render \"Unauthorized\" or redirect to dashboard.\r\n    }\r\n\r\n    const t = await getTranslations('Admin.Users');\r\n    const users = await getUsers();\r\n    const departments = await getDepartments();\r\n\r\n    return (\r\n        <div className=\"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-semibold\">{t('title')}</h1>\r\n                    <p className=\"text-muted-foreground\">Administración de acceso y roles del sistema.</p>\r\n                </div>\r\n                <UserDialog departments={departments} />\r\n            </div>\r\n\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle>Usuarios ({users.length})</CardTitle>\r\n                    <CardDescription>Lista completa de usuarios registrados.</CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow>\r\n                                <TableHead>{t('name')}</TableHead>\r\n                                <TableHead>{t('email')}</TableHead>\r\n                                <TableHead>{t('role')}</TableHead>\r\n                                <TableHead>{t('department')}</TableHead>\r\n                                <TableHead className=\"text-right\">{t('actions')}</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {users.map((user) => (\r\n                                <TableRow key={user.id}>\r\n                                    <TableCell className=\"font-medium\">{user.name}</TableCell>\r\n                                    <TableCell>{user.email}</TableCell>\r\n                                    <TableCell>\r\n                                        <Badge variant=\"outline\">{user.role}</Badge>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        {user.department?.name || \"-\"}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right flex justify-end gap-2\">\r\n                                        <UserDialog\r\n                                            user={user}\r\n                                            departments={departments}\r\n                                            trigger={\r\n                                                <Button size=\"icon\" variant=\"ghost\">\r\n                                                    <Edit className=\"h-4 w-4\" />\r\n                                                </Button>\r\n                                            }\r\n                                        />\r\n                                        {/* Implementation of Delete Button usually requires client component or form action. \r\n                                            For simplicity I omit functional delete button here or need a DeleteUserButton component.\r\n                                            I'll leave it visual for now or create a small client component. */}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is assigned a value but never used.","line":30,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AdminSidebar, MobileSidebar } from \"@/components/admin/sidebar\"\r\nimport { ModeToggle } from \"@/components/mode-toggle\"\r\nimport { LanguageToggle } from \"@/components/language-toggle\"\r\nimport { GlobalSearch } from \"@/components/admin/global-search\"\r\nimport { auth } from \"@/auth\"\r\nimport { redirect } from \"next/navigation\"\r\nimport { getTranslations } from 'next-intl/server';\r\nimport { UserNav } from \"@/components/admin/user-nav\"\r\n\r\nexport default async function AdminLayout({\r\n    children,\r\n    params\r\n}: {\r\n    children: React.ReactNode\r\n    params: Promise<{ locale: string }>\r\n}) {\r\n    const { locale } = await params;\r\n\r\n    let session = null;\r\n    try {\r\n        session = await auth();\r\n    } catch (e) {\r\n        console.error(\"Auth session failed:\", e);\r\n    }\r\n\r\n    if (session?.user?.role === 'CLIENT') {\r\n        redirect(`/${locale}/portal`);\r\n    }\r\n\r\n    const t = await getTranslations('Layout');\r\n\r\n    return (\r\n        <div className=\"grid h-screen w-full md:grid-cols-[220px_1fr] lg:grid-cols-[280px_1fr] overflow-hidden\">\r\n            <AdminSidebar userRole={session?.user?.role} />\r\n            <div className=\"flex flex-col h-full min-h-0 overflow-hidden\">\r\n                <header className=\"flex h-14 items-center gap-2 md:gap-4 border-b bg-muted/40 px-4 lg:h-[60px] lg:px-6\">\r\n                    <MobileSidebar userRole={session?.user?.role} />\r\n                    <div className=\"w-full flex-1\">\r\n                        <GlobalSearch />\r\n                    </div>\r\n                    <LanguageToggle />\r\n                    <ModeToggle />\r\n                    <UserNav user={session?.user || {}} />\r\n                </header>\r\n                <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n                    {children}\r\n                </main>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(admin)\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(marketing)\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\portal\\kb\\[slug]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\portal\\kb\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\portal\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\portal\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\portal\\tickets\\[ticketId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations } from 'next-intl/server';\r\nimport { Link } from '@/i18n/routing';\r\nimport { ChevronLeft, Home } from \"lucide-react\"\r\nimport { Button } from '@/components/ui/button';\r\nimport { auth } from \"@/auth\"\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { notFound, redirect } from \"next/navigation\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { StatusBadge } from \"@/components/status-badge\"\r\nimport { PriorityBadge } from \"@/components/priority-badge\"\r\nimport { AttachmentSection } from \"@/components/attachments/attachment-section\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\nimport { format } from \"date-fns\"\r\nimport { es, enUS } from \"date-fns/locale\"\r\n\r\ninterface Props {\r\n    params: Promise<{\r\n        ticketId: string\r\n        locale: string\r\n    }>\r\n}\r\n\r\nexport async function generateMetadata({ params }: Props) {\r\n    const t = await getTranslations('Portal.TicketDetail');\r\n    const resolvedParams = await params;\r\n    const ticket = await prisma.case.findUnique({\r\n        where: { id: resolvedParams.ticketId },\r\n        select: { title: true, ticketNumber: true }\r\n    })\r\n\r\n    if (!ticket) {\r\n        return {\r\n            title: `${t('notFound')} - MCSupport`\r\n        }\r\n    }\r\n\r\n    return {\r\n        title: `Ticket #${ticket.ticketNumber || '...'} - ${ticket.title} - MCSupport`\r\n    }\r\n}\r\n\r\nexport default async function PortalTicketDetailPage({ params }: Props) {\r\n    const t = await getTranslations('Portal.TicketDetail');\r\n    const session = await auth();\r\n    if (!session?.user?.id) {\r\n        redirect('/api/auth/signin?callbackUrl=/portal/tickets') // Or better redirect logic\r\n    }\r\n\r\n    const resolvedParams = await params;\r\n    const { ticketId, locale } = resolvedParams;\r\n\r\n    const ticket = await prisma.case.findUnique({\r\n        where: { id: ticketId },\r\n    })\r\n\r\n    if (!ticket) {\r\n        notFound();\r\n    }\r\n\r\n    // Security Check: Ensure user owns the ticket\r\n    if (ticket.userId !== session.user.id) {\r\n        return <div>{t('permissionDenied')}</div>\r\n    }\r\n\r\n    const dateLocale = locale === 'es' ? es : enUS;\r\n\r\n    return (\r\n        <div className=\"mx-auto w-full max-w-4xl space-y-8\">\r\n            <div className=\"flex items-center gap-2 mb-4\">\r\n                <Button asChild variant=\"ghost\" className=\"pl-0 gap-2\">\r\n                    <Link href=\"/portal/tickets\">\r\n                        <ChevronLeft className=\"h-4 w-4\" />\r\n                        {t('back')}\r\n                    </Link>\r\n                </Button>\r\n                <Button asChild variant=\"ghost\" className=\"gap-2\">\r\n                    <Link href=\"/portal\">\r\n                        <Home className=\"h-4 w-4\" />\r\n                        {t('home')}\r\n                    </Link>\r\n                </Button>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <h1 className=\"text-3xl font-bold tracking-tighter sm:text-4xl\">\r\n                        Ticket #{ticket.ticketNumber || String(ticket.id).substring(0, 8).toUpperCase()}\r\n                    </h1>\r\n                    <StatusBadge status={ticket.status} />\r\n                </div>\r\n                <p className=\"text-muted-foreground text-lg\">{ticket.title}</p>\r\n            </div>\r\n\r\n            <div className=\"grid gap-6 md:grid-cols-[2fr_1fr]\">\r\n                <div className=\"space-y-6\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>{t('description')}</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <p className=\"whitespace-pre-wrap leading-relaxed\">\r\n                                {ticket.description}\r\n                            </p>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Future: Comments Section */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>{t('conversation')}</CardTitle>\r\n                            <CardDescription>{t('conversationDesc')}</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"text-center text-muted-foreground py-8\">\r\n                            {t('noMessages')}\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>{t('details')}</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"grid gap-4\">\r\n                            <div className=\"grid gap-1\">\r\n                                <span className=\"text-sm font-medium text-muted-foreground\">{t('priority')}</span>\r\n                                <PriorityBadge priority={ticket.priority} />\r\n                            </div>\r\n                            <Separator />\r\n                            <div className=\"grid gap-1\">\r\n                                <span className=\"text-sm font-medium text-muted-foreground\">{t('created')}</span>\r\n                                <span>{format(ticket.createdAt, 'PPP p', { locale: dateLocale })}</span>\r\n                            </div>\r\n                            <Separator />\r\n                            <div className=\"grid gap-1\">\r\n                                <span className=\"text-sm font-medium text-muted-foreground\">{t('lastUpdated')}</span>\r\n                                <span>{format(ticket.updatedAt, 'PPP p', { locale: dateLocale })}</span>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <AttachmentSection ticketId={ticket.id} />\r\n                </div>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\portal\\tickets\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\portal\\tickets\\new\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\(portal)\\portal\\tickets\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { auth } from \"@/auth\"\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { Link } from '@/i18n/routing';\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\"\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { PlusCircle, ChevronLeft } from \"lucide-react\"\r\nimport { format } from \"date-fns\"\r\nimport { getTranslations } from \"next-intl/server\";\r\nimport { StatusBadge } from \"@/components/status-badge\";\r\n\r\ninterface Ticket {\r\n    id: string;\r\n    ticketNumber: string;\r\n    title: string;\r\n    status: string;\r\n    updatedAt: Date;\r\n}\r\n\r\nexport default async function PortalTicketsPage() {\r\n    const session = await auth();\r\n    const t = await getTranslations('Portal');\r\n    const tCommon = await getTranslations('Common');\r\n\r\n    // Middleware should handle protection, but good to check.\r\n    if (!session?.user?.id) {\r\n        return <div>{tCommon('loading')}</div>\r\n    }\r\n\r\n    const tickets = await prisma.case.findMany({\r\n        where: {\r\n            userId: session.user.id\r\n        },\r\n        orderBy: {\r\n            updatedAt: 'desc'\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div className=\"mx-auto w-full max-w-5xl space-y-8\">\r\n            <div className=\"flex items-center gap-2\">\r\n                <Button asChild variant=\"ghost\" className=\"pl-0 gap-2\">\r\n                    <Link href=\"/portal\">\r\n                        <ChevronLeft className=\"h-4 w-4\" />\r\n                        {t('back')}\r\n                    </Link>\r\n                </Button>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tighter sm:text-4xl\">{t('myTicketsTitle')}</h1>\r\n                    <p className=\"text-muted-foreground\">{t('myTicketsDesc')}</p>\r\n                </div>\r\n                <Link href=\"/portal/tickets/new\">\r\n                    <Button className=\"gap-2\">\r\n                        <PlusCircle className=\"h-4 w-4\" />\r\n                        {t('newTicketTitle')}\r\n                    </Button>\r\n                </Link>\r\n            </div>\r\n\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle>{t('recentTickets')}</CardTitle>\r\n                    <CardDescription>\r\n                        {t('myTicketsDesc')}\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow>\r\n                                <TableHead>{t('ticketDetails')}</TableHead>\r\n                                <TableHead>{t('subject')}</TableHead>\r\n                                <TableHead>{t('priority')}</TableHead>\r\n                                <TableHead className=\"hidden md:table-cell\">{t('recentTickets')}</TableHead>\r\n                                <TableHead className=\"text-right\">{t('actions')}</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {tickets.map((ticket: Ticket) => (\r\n                                <TableRow key={ticket.id}>\r\n                                    <TableCell className=\"font-medium\">\r\n                                        {ticket.ticketNumber || String(ticket.id).substring(0, 8).toUpperCase()}\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <div className=\"font-medium\">{ticket.title}</div>\r\n                                        <div className=\"hidden text-sm text-muted-foreground md:inline\">\r\n                                            {/* Optional: Truncated description */}\r\n                                        </div>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <StatusBadge status={ticket.status} />\r\n                                    </TableCell>\r\n                                    <TableCell className=\"hidden md:table-cell\">\r\n                                        {format(ticket.updatedAt, 'yyyy-MM-dd')}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right\">\r\n                                        <Link href={`/portal/tickets/${ticket.id}`}>\r\n                                            <Button size=\"sm\" variant=\"ghost\">{t('viewHistory')}</Button>\r\n                                        </Link>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                            {tickets.length === 0 && (\r\n                                <TableRow>\r\n                                    <TableCell colSpan={5} className=\"text-center h-24 text-muted-foreground\">\r\n                                        {t('noTickets')}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getTranslations' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Metadata } from \"next\";\nimport { Geist, Geist_Mono } from \"next/font/google\";\nimport \"../globals.css\";\nimport { NextIntlClientProvider } from 'next-intl';\nimport { getTranslations, getMessages } from 'next-intl/server';\nimport { ThemeProvider } from \"@/components/theme-provider\";\nimport { Toaster } from \"@/components/ui/sonner\";\nimport NextTopLoader from 'nextjs-toploader';\n\nconst geistSans = Geist({\n  variable: \"--font-geist-sans\",\n  subsets: [\"latin\"],\n});\n\nconst geistMono = Geist_Mono({\n  variable: \"--font-geist-mono\",\n  subsets: [\"latin\"],\n});\n\nexport const metadata: Metadata = {\n  title: \"MCSupport\",\n  description: \"Multicomputos Support Portal\",\n  manifest: \"/manifest.json\",\n  appleWebApp: {\n    capable: true,\n    statusBarStyle: \"default\",\n    title: \"MCSupport\",\n  },\n  formatDetection: {\n    telephone: false,\n  },\n};\n\nexport const viewport = {\n  themeColor: \"#0f172a\",\n  width: \"device-width\",\n  initialScale: 1,\n  maximumScale: 1,\n};\n\nexport default async function LocaleLayout({\n  children,\n  params,\n}: {\n  children: React.ReactNode;\n  params: Promise<{ locale: string }>;\n}) {\n  const { locale } = await params;\n\n  // Providing all messages to the client\n  // side is the easiest way to get started\n  const messages = await getMessages();\n\n  return (\n    <html lang={locale} suppressHydrationWarning>\n      <body\n        className={`${geistSans.variable} ${geistMono.variable} antialiased`}\n      >\n        <NextTopLoader color=\"#f97316\" showSpinner={false} />\n        <NextIntlClientProvider messages={messages}>\n          <ThemeProvider\n            attribute=\"class\"\n            defaultTheme=\"system\"\n            enableSystem\n            disableTransitionOnChange\n          >\n            {children}\n            <Toaster />\n          </ThemeProvider>\n        </NextIntlClientProvider>\n      </body>\n    </html>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'locale' is assigned a value but never used.","line":18,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getTranslations } from 'next-intl/server';\r\nimport { LoginForm } from '@/components/auth/login-form';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Link } from '@/i18n/routing';\r\nimport { ChevronLeft } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ModeToggle } from \"@/components/mode-toggle\"\r\nimport { LanguageToggle } from \"@/components/language-toggle\"\r\n\r\ninterface Props {\r\n    params: Promise<{\r\n        locale: string;\r\n    }>\r\n}\r\n\r\nexport default async function LoginPage({ params }: Props) {\r\n    const resolvedParams = await params;\r\n    const { locale } = resolvedParams;\r\n    const t = await getTranslations('Login');\r\n\r\n    return (\r\n        <div className=\"flex h-screen w-full items-center justify-center bg-muted/40 p-4\">\r\n            <Button asChild variant=\"ghost\" className=\"absolute left-4 top-4 md:left-8 md:top-8\">\r\n                <Link href=\"/\" className=\"flex items-center gap-2\">\r\n                    <ChevronLeft className=\"h-4 w-4\" />\r\n                    {t('back')}\r\n                </Link>\r\n            </Button>\r\n\r\n            <div className=\"absolute right-4 top-4 flex items-center gap-2 md:right-8 md:top-8\">\r\n                <LanguageToggle />\r\n                <ModeToggle />\r\n            </div>\r\n\r\n            <Card className=\"w-full max-w-sm\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-2xl\">{t('title')}</CardTitle>\r\n                    <CardDescription>\r\n                        {t('description')}\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <LoginForm />\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\[locale]\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\api\\admin\\reports\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\api\\auth\\[...nextauth]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\app\\api\\integration\\netsuite\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\auth.config.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'z' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'auth' is defined but never used.","line":10,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'nextUrl' is defined but never used.","line":10,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'credentials' is defined but never used.","line":36,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { NextAuthConfig } from \"next-auth\"\r\nimport Credentials from \"next-auth/providers/credentials\"\r\nimport { z } from \"zod\"\r\n\r\nexport const authConfig = {\r\n    pages: {\r\n        signIn: '/login',\r\n    },\r\n    callbacks: {\r\n        authorized({ auth, request: { nextUrl } }) {\r\n            // We handle redirection explicitly in middleware.ts main function to avoid\r\n            // conflict with next-intl and ensure correct execution order.\r\n            return true;\r\n        },\r\n        async jwt({ token, user }) {\r\n            if (user) {\r\n                token.role = user.role\r\n            }\r\n            return token\r\n        },\r\n        async session({ session, token }) {\r\n            if (token && session.user) {\r\n                session.user.role = token.role as string\r\n                session.user.id = token.sub as string\r\n            }\r\n            return session\r\n        }\r\n    },\r\n    providers: [\r\n        Credentials({\r\n            name: \"Email and Password\",\r\n            credentials: {\r\n                email: { label: \"Email\", type: \"email\" },\r\n                password: { label: \"Password\", type: \"password\" }\r\n            },\r\n            async authorize(credentials) {\r\n                // Logic handled in the Node version (auth.ts), this is just definition placeholder \r\n                // OR we define it here if we use fetch to an API. \r\n                // But for Prisma override, we leave it simple here? \r\n                // Actually, in v5, if we use separate config, the middleware uses THIS config.\r\n                // But authorize logic usually needs DB. \r\n                // Middleware generally doesn't check credentials, it checks Session.\r\n                // So we can keep providers empty here? No, NextAuth needs providers.\r\n                // If we split, middleware only needs 'auth' function which verifies session token.\r\n                // We just need EMPTY providers or minimally defined here for types to pass?\r\n                return null;\r\n            }\r\n        })\r\n    ], // Providers added in auth.ts for full strategy\r\n} satisfies NextAuthConfig\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\auth.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[482,485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[482,485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\analytics-dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\article-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\audit-log-timeline.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useLocale\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":29,"column":20,"nodeType":"Identifier","endLine":29,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format } from \"date-fns\"\r\nimport { es, enUS } from \"date-fns/locale\"\r\nimport { useLocale } from \"next-intl\"\r\nimport { Prisma } from \"@prisma/client\"\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\"\r\n\r\ninterface AuditLogEntry {\r\n    id: string\r\n    action: string\r\n    actor: {\r\n        name: string | null\r\n        email: string\r\n    }\r\n    createdAt: Date\r\n    details: Prisma.JsonValue\r\n}\r\n\r\ninterface Props {\r\n    logs: AuditLogEntry[]\r\n    emptyText: string\r\n}\r\n\r\nexport function AuditLogTimeline({ logs, emptyText }: Props) {\r\n    if (logs.length === 0) {\r\n        return <div className=\"text-sm text-muted-foreground p-4\">{emptyText}</div>\r\n    }\r\n\r\n    const locale = useLocale();\r\n    const dateLocale = locale === 'es' ? es : enUS;\r\n\r\n    return (\r\n        <ScrollArea className=\"h-[400px] w-full rounded-md border p-4\">\r\n            <div className=\"space-y-6\">\r\n                {logs.map((log) => (\r\n                    <div key={log.id} className=\"relative flex gap-4\">\r\n                        <Avatar className=\"h-8 w-8 border\">\r\n                            <AvatarImage src={`https://avatar.vercel.sh/${log.actor.email}`} alt={log.actor.name || \"User\"} />\r\n                            <AvatarFallback>{(log.actor.name?.[0] || log.actor.email[0]).toUpperCase()}</AvatarFallback>\r\n                        </Avatar>\r\n                        <div className=\"flex-1 space-y-1\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <p className=\"text-sm font-medium\">{log.actor.name || log.actor.email}</p>\r\n                                <span className=\"text-xs text-muted-foreground\">{format(log.createdAt, \"PPP p\", { locale: dateLocale })}</span>\r\n                            </div>\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                <span className=\"font-semibold text-primary\">{log.action}</span>\r\n                                {log.details && (\r\n                                    <span className=\"ml-2 font-mono text-xs text-foreground/80\">\r\n                                        {JSON.stringify(log.details)}\r\n                                    </span>\r\n                                )}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </ScrollArea>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\global-search.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calculator' is defined but never used.","line":5,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":6,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CreditCard' is defined but never used.","line":7,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Smile' is defined but never used.","line":9,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CommandShortcut' is defined but never used.","line":24,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useTranslations' is defined but never used.","line":29,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport {\r\n    Calculator,\r\n    Calendar,\r\n    CreditCard,\r\n    Settings,\r\n    Smile,\r\n    User,\r\n    Ticket,\r\n    FileText,\r\n    Search\r\n} from \"lucide-react\"\r\n\r\nimport {\r\n    CommandDialog,\r\n    CommandEmpty,\r\n    CommandGroup,\r\n    CommandInput,\r\n    CommandItem,\r\n    CommandList,\r\n    CommandSeparator,\r\n    CommandShortcut,\r\n} from \"@/components/ui/command\"\r\nimport { searchGlobal } from \"@/actions/search-actions\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { useTranslations } from \"next-intl\"\r\n\r\nexport function GlobalSearch() {\r\n    const [open, setOpen] = React.useState(false)\r\n    const [query, setQuery] = React.useState(\"\")\r\n    const [results, setResults] = React.useState<{\r\n        tickets: { id: string, ticketNumber: string, title: string }[],\r\n        users: { id: string, name: string | null, email: string, role: string }[],\r\n        articles: { id: string, title: string }[]\r\n    }>({ tickets: [], users: [], articles: [] })\r\n\r\n    const router = useRouter();\r\n    // const t = useTranslations('Admin'); // Can use later\r\n\r\n    React.useEffect(() => {\r\n        const down = (e: KeyboardEvent) => {\r\n            if (e.key === \"k\" && (e.metaKey || e.ctrlKey)) {\r\n                e.preventDefault()\r\n                setOpen((open) => !open)\r\n            }\r\n        }\r\n\r\n        document.addEventListener(\"keydown\", down)\r\n        return () => document.removeEventListener(\"keydown\", down)\r\n    }, [])\r\n\r\n    React.useEffect(() => {\r\n        if (query.length < 2) return;\r\n\r\n        const timeoutId = setTimeout(async () => {\r\n            const data = await searchGlobal(query);\r\n            setResults(data);\r\n        }, 300);\r\n\r\n        return () => clearTimeout(timeoutId);\r\n    }, [query]);\r\n\r\n    const runCommand = React.useCallback((command: () => unknown) => {\r\n        setOpen(false)\r\n        command()\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                variant=\"outline\"\r\n                className=\"relative h-8 w-full justify-start rounded-[0.5rem] bg-background text-sm font-normal text-muted-foreground shadow-none sm:pr-12 md:w-40 lg:w-64\"\r\n                onClick={() => setOpen(true)}\r\n            >\r\n                <Search className=\"mr-2 h-4 w-4\" />\r\n                <span className=\"hidden lg:inline-flex\">Buscar...</span>\r\n                <span className=\"inline-flex lg:hidden\">Buscar...</span>\r\n                <kbd className=\"pointer-events-none absolute right-[0.3rem] top-[0.3rem] hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex\">\r\n                    <span className=\"text-xs\">⌘</span>K\r\n                </kbd>\r\n            </Button>\r\n            <CommandDialog open={open} onOpenChange={setOpen}>\r\n                <CommandInput placeholder=\"Escriba para buscar...\" value={query} onValueChange={setQuery} />\r\n                <CommandList>\r\n                    <CommandEmpty>No se encontraron resultados.</CommandEmpty>\r\n\r\n                    {results.tickets.length > 0 && (\r\n                        <CommandGroup heading=\"Tickets\">\r\n                            {results.tickets.map(t => (\r\n                                <CommandItem key={t.id} value={`ticket-${t.id}-${t.title}`} onSelect={() => runCommand(() => router.push(`/admin/tickets/${t.id}`))}>\r\n                                    <Ticket className=\"mr-2 h-4 w-4\" />\r\n                                    <span>#{t.ticketNumber} - {t.title}</span>\r\n                                </CommandItem>\r\n                            ))}\r\n                        </CommandGroup>\r\n                    )}\r\n\r\n                    {results.articles.length > 0 && (\r\n                        <CommandSeparator />\r\n                    )}\r\n\r\n                    {results.articles.length > 0 && (\r\n                        <CommandGroup heading=\"Artículos\">\r\n                            {results.articles.map(a => (\r\n                                <CommandItem key={a.id} value={`article-${a.id}-${a.title}`} onSelect={() => runCommand(() => router.push(`/admin/kb/${a.id}`))}>\r\n                                    <FileText className=\"mr-2 h-4 w-4\" />\r\n                                    <span>{a.title}</span>\r\n                                </CommandItem>\r\n                            ))}\r\n                        </CommandGroup>\r\n                    )}\r\n\r\n                    {results.users.length > 0 && (\r\n                        <CommandSeparator />\r\n                    )}\r\n\r\n                    {results.users.length > 0 && (\r\n                        <CommandGroup heading=\"Usuarios\">\r\n                            {results.users.map(u => (\r\n                                <CommandItem key={u.id} value={`user-${u.id}-${u.name}`} onSelect={() => runCommand(() => router.push(`/admin/users`))}>\r\n                                    <User className=\"mr-2 h-4 w-4\" />\r\n                                    <span>{u.name || u.email} ({u.role})</span>\r\n                                </CommandItem>\r\n                            ))}\r\n                        </CommandGroup>\r\n                    )}\r\n                </CommandList>\r\n            </CommandDialog>\r\n        </>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\profile-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\settings-form.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":39,"column":9,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":39,"endColumn":22,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1460,1473],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nC:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\settings-form.tsx:124:42\n  122 |                             <Switch\n  123 |                                 id=\"maintenanceMode\"\n> 124 |                                 checked={form.watch(\"maintenanceMode\")}\n      |                                          ^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  125 |                                 onCheckedChange={(checked) =>\n  126 |                                     form.setValue(\"maintenanceMode\", checked)\n  127 |                                 }","line":124,"column":42,"nodeType":null,"endLine":124,"endColumn":46}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useTransition } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useTranslations } from \"next-intl\";\r\nimport { toast } from \"sonner\";\r\nimport { updateSystemConfig } from \"@/actions/settings-actions\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Loader2, Save } from \"lucide-react\";\r\n\r\n// Schema definition matching the server one\r\nconst settingsSchema = z.object({\r\n    companyName: z.string().min(1),\r\n    supportEmail: z.string().email(),\r\n    maintenanceMode: z.boolean(),\r\n    // Use z.number() but handle string input via coerce or pre-process if needed\r\n    // simpler for form to just use coerse\r\n    maxUploadSizeMB: z.coerce.number().min(1).max(50),\r\n    allowedFileTypes: z.string().min(1),\r\n});\r\n\r\ntype SettingsFormData = z.infer<typeof settingsSchema>;\r\n\r\ninterface SettingsFormProps {\r\n    initialData: SettingsFormData;\r\n}\r\n\r\nexport function SettingsForm({ initialData }: SettingsFormProps) {\r\n    const t = useTranslations(\"Admin.Settings\");\r\n    const [isPending, startTransition] = useTransition();\r\n\r\n    const form = useForm<SettingsFormData>({\r\n        // @ts-ignore\r\n        resolver: zodResolver(settingsSchema),\r\n        defaultValues: initialData,\r\n    });\r\n\r\n    const onSubmit = (data: SettingsFormData) => {\r\n        startTransition(async () => {\r\n            try {\r\n                const result = await updateSystemConfig(data);\r\n                if (result.error) {\r\n                    toast.error(t(\"error\"));\r\n                } else {\r\n                    toast.success(t(\"success\"));\r\n                }\r\n            } catch {\r\n                toast.error(t(\"error\"));\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"grid gap-6\">\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle>{t(\"title\")}</CardTitle>\r\n                    <CardDescription>\r\n                        {t(\"companyName\")}, {t(\"supportEmail\")}, etc.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                        <div className=\"grid gap-4 md:grid-cols-2\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"companyName\">{t(\"companyName\")}</Label>\r\n                                <Input\r\n                                    id=\"companyName\"\r\n                                    {...form.register(\"companyName\")}\r\n                                    disabled={isPending}\r\n                                />\r\n                                {form.formState.errors.companyName && (\r\n                                    <p className=\"text-sm text-red-500\">\r\n                                        {form.formState.errors.companyName.message}\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"supportEmail\">{t(\"supportEmail\")}</Label>\r\n                                <Input\r\n                                    id=\"supportEmail\"\r\n                                    type=\"email\"\r\n                                    {...form.register(\"supportEmail\")}\r\n                                    disabled={isPending}\r\n                                />\r\n                                {form.formState.errors.supportEmail && (\r\n                                    <p className=\"text-sm text-red-500\">\r\n                                        {form.formState.errors.supportEmail.message}\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"maxUploadSizeMB\">{t(\"maxUploadSize\")}</Label>\r\n                                <Input\r\n                                    id=\"maxUploadSizeMB\"\r\n                                    type=\"number\"\r\n                                    {...form.register(\"maxUploadSizeMB\")}\r\n                                    disabled={isPending}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"allowedFileTypes\">{t(\"allowedFileTypes\")}</Label>\r\n                                <Input\r\n                                    id=\"allowedFileTypes\"\r\n                                    {...form.register(\"allowedFileTypes\")}\r\n                                    disabled={isPending}\r\n                                    placeholder=\".jpg,.png\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center space-x-2 rounded-lg border p-4\">\r\n                            <Switch\r\n                                id=\"maintenanceMode\"\r\n                                checked={form.watch(\"maintenanceMode\")}\r\n                                onCheckedChange={(checked) =>\r\n                                    form.setValue(\"maintenanceMode\", checked)\r\n                                }\r\n                                disabled={isPending}\r\n                            />\r\n                            <div className=\"space-y-0.5\">\r\n                                <Label htmlFor=\"maintenanceMode\">{t(\"maintenanceMode\")}</Label>\r\n                                <p className=\"text-sm text-muted-foreground\">\r\n                                    {t(\"maintenanceModeDesc\")}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-end\">\r\n                            <Button type=\"submit\" disabled={isPending}>\r\n                                {isPending ? (\r\n                                    <>\r\n                                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                        {t(\"saving\")}\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <Save className=\"mr-2 h-4 w-4\" />\r\n                                        {t(\"save\")}\r\n                                    </>\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </form>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ThemeProvider' is defined but never used.","line":25,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\n\r\nimport { Link, usePathname } from '@/i18n/routing';\r\nimport { useTranslations } from 'next-intl';\r\nimport { cn } from \"@/lib/utils\"\r\nimport {\r\n    LayoutDashboard,\r\n    Ticket,\r\n    BookOpen,\r\n    Settings,\r\n    Menu,\r\n    LogOut,\r\n    FileText,\r\n    Users\r\n} from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n    Sheet,\r\n    SheetContent,\r\n    SheetTrigger,\r\n} from \"@/components/ui/sheet\"\r\nimport { signOut } from \"next-auth/react\"\r\nimport { ThemeProvider } from \"next-themes\" // Not needed here directly if handled in layout? \r\n// We need a theme toggle maybe?\r\n\r\n\r\n\r\nexport interface SidebarProps {\r\n    userRole?: string\r\n}\r\n\r\nexport function AdminSidebar({ userRole }: SidebarProps) {\r\n    const pathname = usePathname();\r\n    const t = useTranslations('Admin');\r\n\r\n    const sidebarLinks = [\r\n        { href: \"/admin\", label: t('dashboard'), icon: LayoutDashboard },\r\n        { href: \"/admin/tickets\", label: t('tickets'), icon: Ticket },\r\n        { href: \"/admin/kb\", label: t('kb'), icon: BookOpen },\r\n        { href: \"/admin/reports\", label: t('reports'), icon: FileText },\r\n        { href: \"/admin/users\", label: t('users'), icon: Users, role: 'MANAGER' },\r\n        { href: \"/admin/settings\", label: t('settings'), icon: Settings },\r\n    ]\r\n\r\n    const filteredLinks = sidebarLinks.filter(link => !link.role || link.role === userRole);\r\n\r\n    const tLayout = useTranslations('Layout');\r\n\r\n    return (\r\n        <div className=\"hidden border-r bg-muted/40 md:block h-full\">\r\n            <div className=\"flex h-full flex-col gap-2\">\r\n                <div className=\"flex h-14 items-center px-4 lg:h-[60px] lg:px-6\">\r\n                    <Link href=\"/\" className=\"flex flex-col items-start gap-0 font-semibold hover:opacity-90 transition-opacity\">\r\n                        <span className=\"text-xl font-bold text-primary tracking-tight\">MCSupport</span>\r\n                        <span className=\"h-1 w-2/3 bg-[#f97316] rounded-r-full\" />\r\n                    </Link>\r\n                </div>\r\n                <div className=\"flex-1 overflow-y-auto py-2\">\r\n                    <nav className=\"grid items-start px-2 text-sm font-medium lg:px-4 gap-1 mt-4\">\r\n                        {filteredLinks.map((link) => {\r\n                            const isActive = pathname === link.href || (link.href !== '/admin' && pathname.startsWith(link.href));\r\n                            return (\r\n                                <Link\r\n                                    key={link.href}\r\n                                    href={link.href}\r\n                                    className={cn(\r\n                                        \"flex items-center gap-3 rounded-lg px-3 py-2 transition-all hover:text-primary\",\r\n                                        isActive ? \"bg-muted text-primary\" : \"text-muted-foreground\"\r\n                                    )}\r\n                                >\r\n                                    <link.icon className=\"h-4 w-4\" />\r\n                                    {link.label}\r\n                                </Link>\r\n                            )\r\n                        })}\r\n                    </nav>\r\n                </div>\r\n                <div className=\"mt-auto p-4 pb-6\">\r\n                    <Button variant=\"outline\" className=\"w-full justify-start gap-2\" onClick={() => signOut()}>\r\n                        <LogOut className=\"h-4 w-4\" />\r\n                        {tLayout('logout')}\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function MobileSidebar({ userRole }: SidebarProps) {\r\n    const pathname = usePathname();\r\n    const t = useTranslations('Admin');\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const sidebarLinks = [\r\n        { href: \"/admin\", label: t('dashboard'), icon: LayoutDashboard },\r\n        { href: \"/admin/tickets\", label: t('tickets'), icon: Ticket },\r\n        { href: \"/admin/kb\", label: t('kb'), icon: BookOpen },\r\n        { href: \"/admin/reports\", label: t('reports'), icon: FileText },\r\n        { href: \"/admin/users\", label: t('users'), icon: Users, role: 'MANAGER' },\r\n        { href: \"/admin/settings\", label: t('settings'), icon: Settings },\r\n    ]\r\n\r\n    const filteredLinks = sidebarLinks.filter(link => !link.role || link.role === userRole);\r\n\r\n    return (\r\n        <Sheet open={open} onOpenChange={setOpen}>\r\n            <SheetTrigger asChild>\r\n                <Button\r\n                    variant=\"outline\"\r\n                    size=\"icon\"\r\n                    className=\"shrink-0 md:hidden\"\r\n                >\r\n                    <Menu className=\"h-5 w-5\" />\r\n                    <span className=\"sr-only\">Toggle navigation menu</span>\r\n                </Button>\r\n            </SheetTrigger>\r\n            <SheetContent side=\"left\" className=\"flex flex-col\">\r\n                <nav className=\"grid gap-2 text-lg font-medium\">\r\n                    <Link\r\n                        href=\"#\"\r\n                        className=\"flex flex-col items-start gap-0 font-semibold mb-4 hover:opacity-90 transition-opacity\"\r\n                    >\r\n                        <span className=\"text-xl font-bold text-primary tracking-tight\">MCSupport</span>\r\n                        <span className=\"h-1 w-2/3 bg-[#f97316] rounded-r-full\" />\r\n                    </Link>\r\n                    {filteredLinks.map((link) => {\r\n                        const isActive = pathname === link.href || (link.href !== '/admin' && pathname.startsWith(link.href));\r\n                        return (\r\n                            <Link\r\n                                key={link.href}\r\n                                href={link.href}\r\n                                onClick={() => setOpen(false)}\r\n                                className={cn(\r\n                                    \"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 hover:text-foreground\",\r\n                                    isActive ? \"bg-muted text-foreground\" : \"text-muted-foreground\"\r\n                                )}\r\n                            >\r\n                                <link.icon className=\"h-5 w-5\" />\r\n                                {link.label}\r\n                            </Link>\r\n                        )\r\n                    })}\r\n                </nav>\r\n            </SheetContent>\r\n        </Sheet>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\ticket-assigner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\ticket-filters.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is assigned a value but never used.","line":14,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\"use client\"\r\n\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { usePathname, useRouter, useSearchParams } from \"next/navigation\"\r\nimport { Search } from \"lucide-react\"\r\nimport { useTranslations } from \"next-intl\"\r\nimport { useEffect, useState } from \"react\"\r\n\r\nexport function TicketFilters() {\r\n    const searchParams = useSearchParams();\r\n    const pathname = usePathname();\r\n    const { replace } = useRouter();\r\n    const t = useTranslations('Admin');\r\n    const [term, setTerm] = useState(searchParams.get('query')?.toString() || '');\r\n\r\n    useEffect(() => {\r\n        const timeoutId = setTimeout(() => {\r\n            const params = new URLSearchParams(searchParams);\r\n            if (term) {\r\n                params.set('query', term);\r\n            } else {\r\n                params.delete('query');\r\n            }\r\n            replace(`${pathname}?${params.toString()}`);\r\n        }, 300);\r\n\r\n        return () => clearTimeout(timeoutId);\r\n    }, [term, replace, pathname, searchParams]);\r\n\r\n    return (\r\n        <div className=\"flex items-center w-full max-w-sm gap-2\">\r\n            <div className=\"relative flex-1\">\r\n                <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                <Input\r\n                    placeholder=\"Buscar ticket...\"\r\n                    onChange={(e) => setTerm(e.target.value)}\r\n                    value={term}\r\n                    className=\"pl-8\"\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\ticket-status-updater.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toast' is defined but never used.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport { useTranslations } from \"next-intl\"\r\nimport { updateTicketStatus } from \"@/actions/ticket-actions\"\r\nimport { toast } from \"sonner\" // We don't have sonner installed yet, maybe basic alert or just state?\r\n// Let's stick to basic state or install sonner later. For now console log.\r\n\r\ninterface Props {\r\n    ticketId: string\r\n    currentStatus: string\r\n}\r\n\r\nexport function TicketStatusUpdater({ ticketId, currentStatus }: Props) {\r\n    const [status, setStatus] = React.useState(currentStatus)\r\n    const [isPending, startTransition] = React.useTransition()\r\n    const t = useTranslations('Enums.Status')\r\n    const tCommon = useTranslations('Admin') // For \"status\" label if needed, or just hardcode \"Estado\" if consistent with other places\r\n\r\n    const handleStatusChange = (value: string) => {\r\n        setStatus(value)\r\n        startTransition(async () => {\r\n            const result = await updateTicketStatus(ticketId, value)\r\n            if (!result.success) {\r\n                // Revert on failure\r\n                setStatus(currentStatus)\r\n                console.error(result.error)\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Select value={status} onValueChange={handleStatusChange} disabled={isPending}>\r\n            <SelectTrigger className=\"w-[180px]\">\r\n                <SelectValue placeholder={tCommon('status')} />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n                <SelectItem value=\"OPEN\">{t('OPEN')}</SelectItem>\r\n                <SelectItem value=\"IN_PROGRESS\">{t('IN_PROGRESS')}</SelectItem>\r\n                <SelectItem value=\"WAITING_CUSTOMER\">{t('WAITING_CUSTOMER')}</SelectItem>\r\n                <SelectItem value=\"RESOLVED\">{t('RESOLVED')}</SelectItem>\r\n                <SelectItem value=\"CLOSED\">{t('CLOSED')}</SelectItem>\r\n            </SelectContent>\r\n        </Select>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\user-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\admin\\user-nav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\attachments\\attachment-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\attachments\\upload-button.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState, useTransition } from \"react\"\r\nimport { uploadAttachment } from \"@/actions/attachment-actions\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Paperclip, Loader2 } from \"lucide-react\"\r\nimport { toast } from \"sonner\"\r\nimport { useTranslations } from \"next-intl\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport function UploadButton({ ticketId, currentCount = 0 }: { ticketId: string, currentCount?: number }) {\r\n    const [isPending, startTransition] = useTransition();\r\n\r\n    const t = useTranslations('Admin.Attachments');\r\n    const isMaxReached = currentCount >= 10;\r\n\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n        formData.append(\"ticketId\", ticketId);\r\n\r\n        startTransition(async () => {\r\n            const res = await uploadAttachment(formData);\r\n            if (res.error) {\r\n                toast.error(res.error);\r\n            } else {\r\n                toast.success(t('success'));\r\n            }\r\n            // Reset input\r\n            e.target.value = \"\";\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex items-center\">\r\n            <input\r\n                type=\"file\"\r\n                id=\"file-upload\"\r\n                className=\"hidden\"\r\n                onChange={handleFileChange}\r\n                disabled={isPending || isMaxReached}\r\n            />\r\n            <label htmlFor=\"file-upload\">\r\n                <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    asChild\r\n                    disabled={isPending || isMaxReached}\r\n                    className={cn(\"cursor-pointer\", isMaxReached && \"cursor-not-allowed opacity-50\")}\r\n                >\r\n                    <span>\r\n                        {isPending ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Paperclip className=\"mr-2 h-4 w-4\" />}\r\n                        {isMaxReached ? t('limitReached') : t('upload')}\r\n                    </span>\r\n                </Button>\r\n            </label>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\auth\\login-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\auth\\register-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState, useTransition } from \"react\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { zodResolver } from \"@hookform/resolvers/zod\"\r\nimport { z } from \"zod\"\r\nimport { useTranslations } from \"next-intl\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { register } from \"@/actions/auth-actions\"\r\nimport { toast } from \"sonner\"\r\nimport { Loader2 } from \"lucide-react\"\r\n\r\nconst RegisterSchema = z.object({\r\n    name: z.string().min(1, \"Requerido\"),\r\n    email: z.string().email(\"Correo inválido\"),\r\n    password: z.string().min(6, \"Mínimo 6 caracteres\"),\r\n})\r\n\r\nexport function RegisterForm() {\r\n    const t = useTranslations('Register');\r\n    const [isPending, startTransition] = useTransition();\r\n\r\n    const form = useForm<z.infer<typeof RegisterSchema>>({\r\n        resolver: zodResolver(RegisterSchema),\r\n        defaultValues: {\r\n            name: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n        },\r\n    })\r\n\r\n    function onSubmit(values: z.infer<typeof RegisterSchema>) {\r\n        startTransition(async () => {\r\n            const result = await register(values);\r\n            if (result.error) {\r\n                toast.error(result.error);\r\n            } else {\r\n                toast.success(result.success);\r\n                // Redirect or clear form? \r\n                // Usually redirect to login.\r\n                window.location.href = \"/login\";\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"name\"\r\n                    render={({ field }) => (\r\n                        <FormItem>\r\n                            <FormLabel>{t('name')}</FormLabel>\r\n                            <FormControl>\r\n                                <Input disabled={isPending} placeholder=\"John Doe\" {...field} />\r\n                            </FormControl>\r\n                            <FormMessage />\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"email\"\r\n                    render={({ field }) => (\r\n                        <FormItem>\r\n                            <FormLabel>{t('email')}</FormLabel>\r\n                            <FormControl>\r\n                                <Input disabled={isPending} placeholder=\"john@multicomputos.com\" type=\"email\" {...field} />\r\n                            </FormControl>\r\n                            <FormMessage />\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"password\"\r\n                    render={({ field }) => (\r\n                        <FormItem>\r\n                            <FormLabel>{t('password')}</FormLabel>\r\n                            <FormControl>\r\n                                <Input disabled={isPending} placeholder=\"******\" type=\"password\" {...field} />\r\n                            </FormControl>\r\n                            <FormMessage />\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n                <Button type=\"submit\" className=\"w-full\" disabled={isPending}>\r\n                    {isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                    {t('submit')}\r\n                </Button>\r\n            </form>\r\n        </Form>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\language-toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\mode-toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\portal\\client-login-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FormLabel' is defined but never used.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Mail' is defined but never used.","line":22,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState, useTransition } from \"react\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { zodResolver } from \"@hookform/resolvers/zod\"\r\nimport { z } from \"zod\"\r\nimport { useTranslations } from \"next-intl\"\r\nimport { signIn } from \"next-auth/react\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { requestOtp } from \"@/actions/otp-actions\"\r\nimport { toast } from \"sonner\"\r\nimport { Loader2, Mail } from \"lucide-react\"\r\nimport { useSearchParams, useRouter } from \"next/navigation\"\r\n\r\nconst EmailSchema = z.object({\r\n    email: z.string().email(\"Correo inválido\"),\r\n})\r\n\r\nconst CodeSchema = z.object({\r\n    code: z.string().min(6, \"Debe tener 6 dígitos\"),\r\n})\r\n\r\nexport function ClientLoginForm() {\r\n    const t = useTranslations('Login.Otp');\r\n    const [isPending, startTransition] = useTransition();\r\n    const [step, setStep] = useState<\"EMAIL\" | \"CODE\">(\"EMAIL\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n    const callbackUrl = searchParams.get(\"callbackUrl\") || \"/portal/tickets\";\r\n\r\n    const emailForm = useForm<z.infer<typeof EmailSchema>>({\r\n        resolver: zodResolver(EmailSchema),\r\n        defaultValues: { email: \"\" }\r\n    })\r\n\r\n    const codeForm = useForm<z.infer<typeof CodeSchema>>({\r\n        resolver: zodResolver(CodeSchema),\r\n        defaultValues: { code: \"\" }\r\n    })\r\n\r\n    function onRequestOtp(values: z.infer<typeof EmailSchema>) {\r\n        startTransition(async () => {\r\n            const result = await requestOtp(values.email);\r\n            if (result.error) {\r\n                toast.error(result.error);\r\n            } else {\r\n                setEmail(values.email);\r\n                setStep(\"CODE\");\r\n                toast.success(result.message);\r\n            }\r\n        })\r\n    }\r\n\r\n    function onVerifyOtp(values: z.infer<typeof CodeSchema>) {\r\n        startTransition(async () => {\r\n            const result = await signIn(\"otp\", {\r\n                email,\r\n                code: values.code,\r\n                redirect: false,\r\n            });\r\n\r\n            if (result?.error) {\r\n                toast.error(t('invalidCredentials')); // Or generic error\r\n            } else {\r\n                router.push(callbackUrl);\r\n                toast.success(\"Bienvenido!\");\r\n            }\r\n        })\r\n    }\r\n\r\n    if (step === \"EMAIL\") {\r\n        return (\r\n            <div className=\"grid gap-6\">\r\n                <div className=\"flex flex-col space-y-2 text-center\">\r\n                    <h1 className=\"text-2xl font-semibold tracking-tight\">{t('step1Title')}</h1>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                        Ingrese su correo para recibir un código de acceso.\r\n                    </p>\r\n                </div>\r\n                <Form {...emailForm}>\r\n                    <form onSubmit={emailForm.handleSubmit(onRequestOtp)} className=\"space-y-4\">\r\n                        <FormField\r\n                            control={emailForm.control}\r\n                            name=\"email\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormControl>\r\n                                        <Input disabled={isPending} placeholder={t('emailPlaceholder')} type=\"email\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <Button type=\"submit\" className=\"w-full\" disabled={isPending}>\r\n                            {isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                            {t('sendCode')}\r\n                        </Button>\r\n                    </form>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"grid gap-6\">\r\n            <div className=\"flex flex-col space-y-2 text-center\">\r\n                <h1 className=\"text-2xl font-semibold tracking-tight\">{t('step2Title')}</h1>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                    Enviado a: <span className=\"font-medium text-foreground\">{email}</span>\r\n                </p>\r\n            </div>\r\n            <Form {...codeForm}>\r\n                <form onSubmit={codeForm.handleSubmit(onVerifyOtp)} className=\"space-y-4\">\r\n                    <FormField\r\n                        control={codeForm.control}\r\n                        name=\"code\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormControl>\r\n                                    <Input\r\n                                        disabled={isPending}\r\n                                        placeholder={t('codePlaceholder')}\r\n                                        className=\"text-center text-lg tracking-widest\"\r\n                                        maxLength={6}\r\n                                        {...field}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n                    <Button type=\"submit\" className=\"w-full\" disabled={isPending}>\r\n                        {isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        {t('verify')}\r\n                    </Button>\r\n                    <Button\r\n                        type=\"button\"\r\n                        variant=\"ghost\"\r\n                        className=\"w-full\"\r\n                        onClick={() => setStep(\"EMAIL\")}\r\n                        disabled={isPending}\r\n                    >\r\n                        Volver / Cambiar Correo\r\n                    </Button>\r\n                </form>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\portal\\kb-search.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\portal\\ticket-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\priority-badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\status-badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\theme-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\i18n\\request.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'notFound' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[471,474],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[471,474],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getRequestConfig } from 'next-intl/server';\r\nimport { routing } from './routing';\r\nimport { notFound } from 'next/navigation';\r\n\r\nexport default getRequestConfig(async ({ requestLocale }) => {\r\n    // This typically corresponds to the `[locale]` segment\r\n    let locale = await requestLocale;\r\n\r\n    // Ensure that a valid locale is used\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (!locale || !routing.locales.includes(locale as any)) {\r\n        locale = routing.defaultLocale;\r\n        // Optionally redirect or notFound, but relying on defaults is safer for middleware\r\n    }\r\n\r\n    return {\r\n        locale,\r\n        messages: (await import(`../messages/${locale}.json`)).default\r\n    };\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\i18n\\routing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\lib\\audit-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\lib\\email-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\lib\\prisma.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\next.config.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":3,"column":17,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":3,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\prisma\\seed.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deptInfra' is assigned a value but never used.","line":10,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deptRedes' is assigned a value but never used.","line":11,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deptAuto' is assigned a value but never used.","line":12,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deptAcc' is assigned a value but never used.","line":13,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PrismaClient } from '@prisma/client'\r\nimport { hash } from 'bcryptjs'\r\nconst prisma = new PrismaClient()\r\n\r\nasync function main() {\r\n    // Departments\r\n    const deptSupport = await prisma.department.upsert({ where: { name: 'Soporte' }, update: {}, create: { name: 'Soporte' } })\r\n    const deptDev = await prisma.department.upsert({ where: { name: 'Desarrollo' }, update: {}, create: { name: 'Desarrollo' } })\r\n    const deptConsulting = await prisma.department.upsert({ where: { name: 'Consultoria' }, update: {}, create: { name: 'Consultoria' } })\r\n    const deptInfra = await prisma.department.upsert({ where: { name: 'Infraestructura' }, update: {}, create: { name: 'Infraestructura' } })\r\n    const deptRedes = await prisma.department.upsert({ where: { name: 'Redes' }, update: {}, create: { name: 'Redes' } })\r\n    const deptAuto = await prisma.department.upsert({ where: { name: 'Automatizacion' }, update: {}, create: { name: 'Automatizacion' } })\r\n    const deptAcc = await prisma.department.upsert({ where: { name: 'Contabilidad' }, update: {}, create: { name: 'Contabilidad' } })\r\n\r\n    const passwordHash = await hash('123456', 10)\r\n\r\n    // Roles Seeding\r\n    const admin = await prisma.user.upsert({\r\n        where: { email: 'admin@multicomputos.com' },\r\n        update: { role: 'MANAGER', departmentId: deptSupport.id, password: passwordHash },\r\n        create: {\r\n            email: 'admin@multicomputos.com',\r\n            name: 'Admin Manager',\r\n            password: passwordHash,\r\n            role: 'MANAGER',\r\n            departmentId: deptSupport.id\r\n        }\r\n    })\r\n\r\n    await prisma.user.upsert({\r\n        where: { email: 'michael@multicomputos.com' },\r\n        update: { role: 'MANAGER', departmentId: deptSupport.id, password: passwordHash },\r\n        create: {\r\n            email: 'michael@multicomputos.com',\r\n            name: 'Michael Albert (Manager)',\r\n            password: passwordHash,\r\n            role: 'MANAGER',\r\n            departmentId: deptSupport.id\r\n        }\r\n    })\r\n\r\n    await prisma.user.upsert({\r\n        where: { email: 'claudia@multicomputos.com' },\r\n        update: { role: 'SERVICE_OFFICER', departmentId: deptSupport.id, password: passwordHash },\r\n        create: {\r\n            email: 'claudia@multicomputos.com',\r\n            name: 'Claudia Perez(Oficial de Servicio)',\r\n            password: passwordHash,\r\n            role: 'SERVICE_OFFICER',\r\n            departmentId: deptSupport.id\r\n        }\r\n    })\r\n\r\n    await prisma.user.upsert({\r\n        where: { email: 'fleirin@multicomputos.com' },\r\n        update: { role: 'TEAM_LEAD', departmentId: deptDev.id, password: passwordHash },\r\n        create: {\r\n            email: 'fleirin@multicomputos.com',\r\n            name: 'Fleirin Cipion (Lider de equipo)',\r\n            password: passwordHash,\r\n            role: 'TEAM_LEAD',\r\n            departmentId: deptSupport.id\r\n        }\r\n    })\r\n\r\n    await prisma.user.upsert({\r\n        where: { email: 'jose@multicomputos.com' },\r\n        update: { role: 'TEAM_LEAD', departmentId: deptConsulting.id, password: passwordHash },\r\n        create: {\r\n            email: 'jose@multicomputos.com',\r\n            name: 'Jose Bobadilla (Lider de equipo)',\r\n            password: passwordHash,\r\n            role: 'TEAM_LEAD',\r\n            departmentId: deptSupport.id\r\n        }\r\n    })\r\n\r\n    await prisma.user.upsert({\r\n        where: { email: 'alberto@multicomputos.com' },\r\n        update: { role: 'TECHNICAL_LEAD', departmentId: deptSupport.id, password: passwordHash },\r\n        create: {\r\n            email: 'alberto@multicomputos.com',\r\n            name: 'Alberto Mora (Líder Técnico)',\r\n            password: passwordHash,\r\n            role: 'TECHNICAL_LEAD',\r\n            departmentId: deptSupport.id\r\n        }\r\n    })\r\n\r\n    await prisma.user.upsert({\r\n        where: { email: 'luis@multicomputos.com' },\r\n        update: { role: 'TECHNICAL_LEAD', departmentId: deptConsulting.id, password: passwordHash },\r\n        create: {\r\n            email: 'luis@multicomputos.com',\r\n            name: 'Luis Vargas (Líder Técnico)',\r\n            password: passwordHash,\r\n            role: 'TECHNICAL_LEAD',\r\n            departmentId: deptSupport.id\r\n        }\r\n    })\r\n\r\n    await prisma.user.upsert({\r\n        where: { email: 'eric@multicomputos.com' },\r\n        update: { role: 'TECHNICIAN', departmentId: deptDev.id, password: passwordHash },\r\n        create: {\r\n            email: 'eric@multicomputos.com',\r\n            name: 'Eric Collado (Técnico)',\r\n            password: passwordHash,\r\n            role: 'TECHNICIAN',\r\n            departmentId: deptSupport.id\r\n        }\r\n    })\r\n\r\n    await prisma.user.upsert({\r\n        where: { email: 'laura@multicomputos.com' },\r\n        update: { role: 'TECHNICIAN', departmentId: deptConsulting.id, password: passwordHash },\r\n        create: {\r\n            email: 'laura@multicomputos.com',\r\n            name: 'Laura Lopez (Técnico)',\r\n            password: passwordHash,\r\n            role: 'TECHNICIAN',\r\n            departmentId: deptSupport.id\r\n        }\r\n    })\r\n\r\n    await prisma.user.upsert({\r\n        where: { email: 'heri@multicomputos.com' },\r\n        update: { role: 'DEVELOPER', departmentId: deptDev.id, password: passwordHash },\r\n        create: {\r\n            email: 'heri@multicomputos.com',\r\n            name: 'Heri Espinosa (Desarrollador)',\r\n            password: passwordHash,\r\n            role: 'DEVELOPER',\r\n            departmentId: deptDev.id\r\n        }\r\n    })\r\n\r\n    // Assign 'user' variable for ticket creation\r\n    const user = admin;\r\n    console.log('Seeded Users: admin, lider, tech, dev @multicomputos.com')\r\n\r\n    // --- CLIENTS SEEDING ---\r\n    const clientHidalgos = await prisma.user.upsert({\r\n        where: { email: 'client@hidalgos.com' },\r\n        update: { role: 'CLIENT', password: passwordHash },\r\n        create: {\r\n            email: 'client@hidalgos.com',\r\n            name: 'Farmacia Los Hidalgos (Cliente)',\r\n            password: passwordHash,\r\n            role: 'CLIENT'\r\n        }\r\n    })\r\n\r\n    const clientRamos = await prisma.user.upsert({\r\n        where: { email: 'client@gruporamos.com' },\r\n        update: { role: 'CLIENT', password: passwordHash },\r\n        create: {\r\n            email: 'client@gruporamos.com',\r\n            name: 'Grupo Ramos (Cliente)',\r\n            password: passwordHash,\r\n            role: 'CLIENT'\r\n        }\r\n    })\r\n\r\n    const clientBPD = await prisma.user.upsert({\r\n        where: { email: 'client@bpd.com.do' },\r\n        update: { role: 'CLIENT', password: passwordHash },\r\n        create: {\r\n            email: 'client@bpd.com.do',\r\n            name: 'Banco Popular (Cliente)',\r\n            password: passwordHash,\r\n            role: 'CLIENT'\r\n        }\r\n    })\r\n\r\n    console.log('Seeded Clients: Hidalgos, Ramos, BPD')\r\n\r\n    // Create Sample Tickets\r\n    // Check if tickets exist to avoid duplication on re-run if we don't want to use createMany skipDuplicates (Postgres unique constraint needed)\r\n    // For simplicity, we just create them. If we wanted idempotency we'd check.\r\n    // Given the previous run might have failed or succeeded halfway, let's just count.\r\n\r\n    const count = await prisma.case.count();\r\n    if (count === 0) {\r\n        await prisma.case.createMany({\r\n            data: [\r\n                // Factura Electrónica\r\n                {\r\n                    title: 'Error envío DGII XML - Factura Electrónica',\r\n                    description: 'Al intentar enviar el lote de facturas de ayer, recibimos un error 500 del servicio de la DGII. El XML parece estar mal formado según el log.',\r\n                    priority: 'CRITICAL',\r\n                    status: 'OPEN',\r\n                    userId: clientHidalgos.id,\r\n                    ticketNumber: 'FE-001'\r\n                },\r\n                {\r\n                    title: 'Configuración secuencia NCF B01',\r\n                    description: 'Necesitamos asistencia para configurar la nueva secuencia de Comprobantes Fiscales (B01) que vence el próximo mes.',\r\n                    priority: 'MEDIUM',\r\n                    status: 'IN_PROGRESS',\r\n                    userId: clientRamos.id,\r\n                    ticketNumber: 'FE-002'\r\n                },\r\n\r\n                // Implementaciones ERP Netsuite\r\n                {\r\n                    title: 'Error en Workflow de Aprobación de Compras',\r\n                    description: 'El flujo de aprobación se detiene cuando el monto supera los 50,000 DOP. El supervisor no recibe la notificación.',\r\n                    priority: 'HIGH',\r\n                    status: 'OPEN',\r\n                    userId: clientBPD.id,\r\n                    ticketNumber: 'NS-IMP-001'\r\n                },\r\n                {\r\n                    title: 'Duda sobre reporte de Inventario por Ubicación',\r\n                    description: 'El reporte nativo no muestra stock en tránsito. ¿Cómo podemos personalizarlo?',\r\n                    priority: 'LOW',\r\n                    status: 'WAITING_CUSTOMER',\r\n                    userId: clientHidalgos.id,\r\n                    ticketNumber: 'NS-IMP-002'\r\n                },\r\n\r\n                // Desarrollo de Aplicaciones\r\n                {\r\n                    title: 'Bug en integración API Shopify',\r\n                    description: 'Las órdenes creadas en Shopify no están cayendo en el ERP si el cliente tiene caracteres especiales en el nombre.',\r\n                    priority: 'HIGH',\r\n                    status: 'IN_PROGRESS',\r\n                    userId: user.id, // Internal test\r\n                    ticketNumber: 'DEV-001'\r\n                },\r\n                {\r\n                    title: 'Nueva funcionalidad Portal Clientes',\r\n                    description: 'Requerimiento para agregar botón de descarga de estados de cuenta en PDF.',\r\n                    priority: 'MEDIUM',\r\n                    status: 'OPEN',\r\n                    userId: clientRamos.id,\r\n                    ticketNumber: 'DEV-002'\r\n                },\r\n\r\n                // Consultorías\r\n                {\r\n                    title: 'Optimización de procesos de cierre fiscal',\r\n                    description: 'Consultoría solicitada para revisar los tiempos de cierre mensual, actualmente toman 10 días.',\r\n                    priority: 'LOW',\r\n                    status: 'RESOLVED',\r\n                    userId: clientBPD.id,\r\n                    ticketNumber: 'CONS-001'\r\n                },\r\n                {\r\n                    title: 'Auditoría de permisos de usuario',\r\n                    description: 'Revisión trimestral de accesos y roles en el sistema ERP.',\r\n                    priority: 'MEDIUM',\r\n                    status: 'OPEN',\r\n                    userId: clientRamos.id,\r\n                    ticketNumber: 'CONS-002'\r\n                },\r\n\r\n                // Original seeds tailored\r\n                {\r\n                    title: 'Fallo integración Legacy System',\r\n                    description: 'El sistema legado no responde al ping.',\r\n                    priority: 'CRITICAL',\r\n                    status: 'CLOSED',\r\n                    userId: user.id,\r\n                    ticketNumber: 'LEG-001'\r\n                }\r\n            ]\r\n        })\r\n        console.log('Seeded sample tickets.')\r\n    } else {\r\n        console.log('Tickets already exist, skipping.')\r\n    }\r\n\r\n    // Create Categories\r\n    await prisma.category.createMany({\r\n        data: [\r\n            { name: 'General', slug: 'general', description: 'General questions' },\r\n            { name: 'Billing', slug: 'billing', description: 'Invoices and payments' },\r\n            { name: 'Technical', slug: 'technical', description: 'Technical support' },\r\n        ],\r\n        skipDuplicates: true\r\n    })\r\n\r\n    console.log('Seeding completed.')\r\n}\r\n\r\nmain()\r\n    .then(async () => {\r\n        await prisma.$disconnect()\r\n    })\r\n    .catch(async (e) => {\r\n        console.error(e)\r\n        await prisma.$disconnect()\r\n        process.exit(1)\r\n    })\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\heri.espinosa\\Desktop\\Development Enviroment\\By-Proyects\\Soporte_Netsuite\\mc_support\\types\\next-auth.d.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AdapterUser' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DefaultSession } from \"next-auth\"\r\nimport { AdapterUser } from \"@auth/core/adapters\"\r\n\r\ndeclare module \"next-auth\" {\r\n    interface Session {\r\n        user: {\r\n            role: string\r\n            id: string\r\n        } & DefaultSession[\"user\"]\r\n    }\r\n\r\n    interface User {\r\n        role: string\r\n    }\r\n}\r\n\r\ndeclare module \"@auth/core/adapters\" {\r\n    interface AdapterUser {\r\n        role: string\r\n    }\r\n}\r\n","usedDeprecatedRules":[]}]